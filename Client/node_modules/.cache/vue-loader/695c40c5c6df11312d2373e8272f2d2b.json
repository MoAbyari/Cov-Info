{"remainingRequest":"/Users/m67abyari/cov-info/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/m67abyari/cov-info/src/components/LeafletMap.vue?vue&type=style&index=0&id=ea0eb662&scoped=true&lang=css&","dependencies":[{"path":"/Users/m67abyari/cov-info/src/components/LeafletMap.vue","mtime":1631179394609},{"path":"/Users/m67abyari/cov-info/node_modules/css-loader/dist/cjs.js","mtime":1630730684622},{"path":"/Users/m67abyari/cov-info/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1630730689988},{"path":"/Users/m67abyari/cov-info/node_modules/postcss-loader/src/index.js","mtime":1630730686469},{"path":"/Users/m67abyari/cov-info/node_modules/cache-loader/dist/cjs.js","mtime":1630730682042},{"path":"/Users/m67abyari/cov-info/node_modules/vue-loader/lib/index.js","mtime":1630730687738}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojbWFwQ29udGFpbmVyIHsKICAgIHdpZHRoOiA3MDBweDsKICAgIGhlaWdodDogOTB2aDsKICAgIG1hcmdpbjogMCBhdXRvOwp9Cgo="},{"version":3,"sources":["LeafletMap.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;AACA","file":"LeafletMap.vue","sourceRoot":"src/components","sourcesContent":["<template>\n <div id=\"container\">\n     <h2>Map of NSW COVID-19 CASE LOCATION</h2>\n   <div id=\"mapContainer\"></div>\n </div>\n</template>\n\n<script>\nimport \"leaflet/dist/leaflet.css\";\nimport { api } from '../helpers/helpers';\nimport L from \"leaflet\";\nimport _ from 'lodash';\n\n\nexport default {\n    name: \"Map\",\n    data() {\n        return{\n            NSWGeoJson: [],\n            dailyCasesInState: [],\n            center: [-33.8555, 151.1155],\n        }\n    },\n    methods: {\n        getColor(d) {\n                return  d > 1000 ? '#3D2807' :\n                        d > 500  ? '#bd0026' :\n                        d > 100  ? '#fb6a4a' :\n                        d > 50   ? '#fe9929' :\n                        d > 9   ?   'yellow' :\n                                    '#f0f0f0';\n        },\n        styleMap(feature){\n            if (feature?.properties.LGA_CODE19) {\n                const lgaCode = feature.properties.LGA_CODE19;\n                const numberOfCasesByLga = _.find(this.dailyCasesInState, {lga_code: lgaCode});\n            \n                const totalCases = numberOfCasesByLga?.total_cases || 0;\n                const color = this.getColor(totalCases);\n                return { \n                    color: \"black\",\n                    fillColor: color,\n                    weight: 1,\n                    // opacity: 0.5,\n                    fillOpacity: 1\n                };\n            } else {\n                return { color: \"white\" };\n            }\n        },\n\n        onEachFeature(feature, layer) {\n            if (feature?.properties.LGA_CODE19) {\n                 const numberOfCasesByLga = _.find(this.dailyCasesInState, {lga_code: feature.properties.LGA_CODE19});\n\n                if (numberOfCasesByLga) {\n                    layer.bindPopup(`${feature.properties.LGA_NAME19.bold()}, Total cases: ${numberOfCasesByLga.total_cases}`);\n                    layer.on('mouseover', () => { layer.openPopup(); });\n                    layer.on('mouseout', () => { layer.closePopup(); });\n                }\n            }\n        },\n        \n        setupLeafletMap: function () {\n            const mapDiv = L.map(\"mapContainer\").setView(this.center, 8);\n            L.tileLayer(\n                \"https://api.mapbox.com/styles/v1/moabyari/cktbirbqp2m7v17o50gpwe5x6/tiles/{z}/{x}/{y}?access_token={accessToken}\",\n                {\n                    attribution:\n                    'Map data (c) <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery (c) <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n                    maxZoom: 16,\n                    minZoom: 7,\n                    id: \"mapbox/streets-v11\",\n                    accessToken: \"XXX\",\n                }).addTo(mapDiv);\n\n            L.geoJson(this.NSWGeoJson, {onEachFeature: this.onEachFeature, style: this.styleMap}).addTo(mapDiv);\n        },\n    },\n    async mounted() {\n        this.NSWGeoJson = await api.getNSWGeoJson();\n        this.dailyCasesInState = _.uniqBy(await api.getCasesInState(), 'lga_code');\n        this.setupLeafletMap();\n        this.styleMap();\n    }\n};\n</script>\n\n<style scoped>\n    #mapContainer {\n        width: 700px;\n        height: 90vh;\n        margin: 0 auto;\n    }\n\n</style>"]}]}